<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello, Bootstrap Table!</title>
    <!-- KaTeX CSS and JS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"
      integrity="sha512-EKW5YvKU3hpyyOcN6jQnAxO/L8gts+YdYV6Yymtl8pk9YlYFtqJgihORuRoBXK8/cOIlappdU6Ms8KdK6yBCgA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- Pseudocode CSS and JS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>
  </head>
  <body>
    <div><textarea id="input-text" rows="15" cols="80"></textarea></div>
    <div>
      <button id="submit" type="button">
        <span>提交</span>
      </button>
      <button id="modify" type="button" style="display: none;">
        <span>修改</span>
      </button>
    </div>
    <div id="output-container" width="100%" height="auto">
    </div>
  </body>
  <script>
    try {
      // 输入Latex格式的代码
      const inputText = document.getElementById("input-text");
      // 按钮
      const submit = document.getElementById("submit");
      const modify = document.getElementById("modify");
      // 输出
      const outputContainer = document.getElementById("output-container");


      function getCode() {
        // 获取输入的Latex格式的代码
        const inputTextValue = inputText.value;
        console.log(inputTextValue);
        // 输出
        let outputCode = document.createElement("pre");
        outputCode.textContent = inputTextValue;
        outputCode.className = "pseudocode";
        outputCode.id = "output-code";
        outputCode.style.display = "block";
        console.log(outputCode);
        outputContainer.appendChild(outputCode);
        inputText.style.display = "none";
        modify.style.display = "block";
        submit.style.display = "none";
        pseudocode.renderElement(document.getElementById("output-code"), {
          lineNumber: true,
        });
      }

      submit.addEventListener("click", getCode);

      modify.addEventListener("click", () => {
        outputContainer.innerHTML = "";
        inputText.style.display = "block";
        modify.style.display = "none";
        submit.style.display = "block";
      });

    } catch (error) {
      console.log(error);
    }
  </script>
</html>
